<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:ghurund="clr-namespace:Ghurund.Controls;assembly=Controls"
    xmlns:local="clr-namespace:Ghurund.Controls.Workspace">

	<Style TargetType="{x:Type local:TitleBar}">
		<Setter Property="Background" Value="{DynamicResource Ghurund.Background}"/>
		<Setter Property="Foreground" Value="{DynamicResource Ghurund.Text.Primary}"/>
		<Setter Property="IconColor" Value="{DynamicResource Ghurund.Icon}"/>
		<Setter Property="HandleWindowActions" Value="False"/>
		<Setter Property="HandleWindowDragging" Value="False"/>
		<Setter Property="MinimizeButtonVisibility" Value="Collapsed"/>
		<Setter Property="MaximizeButtonVisibility" Value="Collapsed"/>
		<Setter Property="SnapsToDevicePixels" Value="True"/>
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:TitleBar}">
					<Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
						<DockPanel>
							<Rectangle DockPanel.Dock="Left" Height="16"
									   Fill="{TemplateBinding IconColor}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
								<Rectangle.OpacityMask>
									<ImageBrush ImageSource="{Binding Icon, RelativeSource={RelativeSource TemplatedParent}}"/>
								</Rectangle.OpacityMask>
							</Rectangle>
							<ghurund:IconButton x:Name="closeButton" ToolTip="Close"
												Icon="Resources/close32.png" Foreground="{TemplateBinding IconColor}"
												DockPanel.Dock="Right"/>
							<ghurund:IconButton x:Name="maximizeButton" ToolTip="Maxmize"
												Icon="Resources/restore32.png" Foreground="{TemplateBinding IconColor}"
												DockPanel.Dock="Right" Visibility="{TemplateBinding MaximizeButtonVisibility}"/>
							<ghurund:IconButton x:Name="minimizeButton" ToolTip="Minimize"
												Icon="Resources/minimize32.png" Foreground="{TemplateBinding IconColor}"
												DockPanel.Dock="Right" Visibility="{TemplateBinding MinimizeButtonVisibility}"/>
							<TextBlock x:Name="title"
									   TextWrapping="NoWrap"
									   Text="{TemplateBinding Title}"
									   VerticalAlignment="Center"
									   Padding="4,0,0,0"
									   Foreground="{TemplateBinding Foreground}"
									   Style="{DynamicResource Ghurund.TextStyle.Body2}"/>
							<DockPanel.ContextMenu>
								<ContextMenu>
									<MenuItem Header="_Minimize" Visibility="{TemplateBinding MinimizeButtonVisibility}"/>
									<MenuItem Header="Ma_ximize" Visibility="{TemplateBinding MaximizeButtonVisibility}" />
									<MenuItem Header="Mimimize _To" Visibility="{TemplateBinding MinimizeButtonVisibility}">
										<MenuItem Header="_Left" />
										<MenuItem Header="_Top" />
										<MenuItem Header="_Right" />
										<MenuItem Header="_Bottom" />
									</MenuItem>
									<MenuItem x:Name="undockMenuItem" Header="Undock"/>
									<MenuItem x:Name="closeMenuItem" Header="Close"/>
								</ContextMenu>
							</DockPanel.ContextMenu>
						</DockPanel>
					</Border>
					<ControlTemplate.Triggers>
						<Trigger Property="PanelFocused" Value="true">
							<Setter Property="Foreground" Value="{DynamicResource Ghurund.Text.Primary.Inverse}" />
							<Setter Property="Background" Value="{DynamicResource Ghurund.Primary}" />
							<Setter Property="IconColor" Value="{DynamicResource Ghurund.Icon.Inverse}"/>
						</Trigger>
						<Trigger Property="IsEnabled" Value="False">
							<Setter Property="Background" Value="{DynamicResource Ghurund.Background}" />
							<Setter Property="Foreground" Value="{DynamicResource Ghurund.Text.Disabled}" />
							<Setter Property="IconColor" Value="{DynamicResource Ghurund.Icon.Disabled}"/>
						</Trigger>
					</ControlTemplate.Triggers>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>


</ResourceDictionary>
