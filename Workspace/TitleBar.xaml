<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:ghurund="clr-namespace:Ghurund.Controls;assembly=Controls"
    xmlns:local="clr-namespace:Ghurund.Controls.Workspace">

	<Style TargetType="{x:Type local:TitleBar}">
		<Setter Property="Background" Value="{DynamicResource Ghurund.PrimaryDark}"/>
		<Setter Property="Foreground" Value="{DynamicResource Ghurund.Text.Secondary}"/>
		<Setter Property="SnapsToDevicePixels" Value="True"/>
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:TitleBar}">
					<Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
						<DockPanel>
							<ghurund:IconButton x:Name="closeButton" Icon="Resources/close32.png" DockPanel.Dock="Right" ToolTip="Close" Margin="0,0,4,0"/>
							<ghurund:IconButton x:Name="minimizeButton" Icon="Resources/minimize32.png" DockPanel.Dock="Right" ToolTip="Minimize"/>
							<TextBlock x:Name="title" TextWrapping="NoWrap" Text="{TemplateBinding Title}" VerticalAlignment="Center" Padding="4,0,0,0" Foreground="{TemplateBinding Foreground}" />
							<DockPanel.ContextMenu>
								<ContextMenu>
									<MenuItem Header="_Minimize" />
									<MenuItem Header="Ma_ximize" />
									<MenuItem Header="Mimimize _To">
										<MenuItem Header="_Left" />
										<MenuItem Header="_Top" />
										<MenuItem Header="_Right" />
										<MenuItem Header="_Bottom" />
									</MenuItem>
									<Separator />
									<MenuItem x:Name="undockMenuItem" Header="Undock"/>
									<MenuItem x:Name="closeMenuItem" Header="Close" />
								</ContextMenu>
							</DockPanel.ContextMenu>
						</DockPanel>
					</Border>
					<ControlTemplate.Triggers>
						<Trigger Property="IsParentFocused" Value="true">
							<Setter Property="Background" Value="{DynamicResource Ghurund.PrimaryDark}" />
							<Setter Property="Foreground" Value="{DynamicResource Ghurund.Text.Primary}" />
						</Trigger>
						<Trigger Property="IsEnabled" Value="False">
							<Setter Property="Background" Value="{DynamicResource Ghurund.PrimaryDark}" />
							<Setter Property="Foreground" Value="{DynamicResource Ghurund.Text.Disabled}" />
						</Trigger>
					</ControlTemplate.Triggers>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>


</ResourceDictionary>
